#!/bin/bash

# Dieses Skript vergleicht alle PiHole Adlisten und gibt diejenigen aus, die keine einzigartigen Domains enthalten.

# Schritt 1: Laden Sie die PiHole-Adlisten in Arrays
adlists=($(pihole -g))

# Schritt 2: Vergleichen Sie die Arrays, um die Adlisten zu finden, die keine einzigartigen Domains enthalten
for ((i=0; i<${#adlists[@]}; i++))
do
  for ((j=i+1; j<${#adlists[@]}; j++))
  do
    # Verwenden Sie die "comm" -Funktion, um die Adlisten zu vergleichen und nur die gemeinsamen Domains auszugeben
    # Speichern Sie das Ergebnis in einem temporären Array
    temp_array=($(comm -12 <(echo "${adlists[i]}") <(echo "${adlists[j]}")))

    # Wenn das temporäre Array keine Elemente enthält, bedeutet dies, dass die Adlisten keine gemeinsamen Domains enthalten
    if [ ${#temp_array[@]} -eq 0 ]
    then
      # Geben Sie die Adlisten aus, die keine gemeinsamen Domains enthalten
      echo "Die Adlisten ${adlists[i]} und ${adlists[j]} enthalten keine gemeinsamen Domains."
    fi
  done
done
